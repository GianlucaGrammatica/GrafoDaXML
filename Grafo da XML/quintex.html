<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Djikstra Shortest Path</title>
    <style>
        canvas {
            border: 1px solid black;
            margin-left: 10px;
        }
        #textContainer {
            margin-left: 10px;
            border: 1px solid black;
            height: 500px;
            width: 300px;
            overflow: scroll;
        }
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
    <script src="various_graphs.js"></script>
    <script src="priority-queue.js"></script>
</head>
<body>
    <h1>Djikstra Shortest Path</h1>
    <div style="display: flex; justify-content:center;">
        <canvas id="graphCanvas" width="1400" height="1200"></canvas>
    </div>

    <script>
    // XML del grafo
    const xmlString = `<?xml version="1.0" encoding="UTF-8"?><graphml><graph id="Graph" uidGraph="68" uidEdge="10308"><node positionX="359.07834577429924" positionY="95.19602441705592" id="0" mainText="0" upText="" size="30" ></node><node positionX="494.4381007681467" positionY="57.25528787288923" id="1" mainText="1" upText="" size="30" ></node><node positionX="376.22900466516415" positionY="236.09823495124172" id="2" mainText="2" upText="" size="30" ></node><node positionX="549.961756074475" positionY="180.87192986748727" id="3" mainText="3" upText="" size="30" ></node><node positionX="659.5512862773617" positionY="54.39739879684967" id="4" mainText="4" upText="" size="30" ></node><node positionX="655.8121741516711" positionY="144.05439314498432" id="5" mainText="5" upText="" size="30" ></node><node positionX="564.9188803679918" positionY="278.6685117866358" id="6" mainText="6" upText="" size="30" ></node><node positionX="400.39051313930673" positionY="371.8629016154714" id="7" mainText="7" upText="" size="30" ></node><node positionX="803.0823210416829" positionY="159.01151743850113" id="8" mainText="8" upText="" size="30" ></node><node positionX="651.2099820613582" positionY="378.7661897509407" id="9" mainText="9" upText="" size="30" ></node><node positionX="855.6239823579231" positionY="54.34216183684368" id="10" mainText="10" upText="" size="30" ></node><node positionX="920.3005925862071" positionY="172.73324496658398" id="11" mainText="11" upText="" size="30" ></node><node positionX="836.9883489023157" positionY="300.99025169046934" id="12" mainText="12" upText="" size="30" ></node><node positionX="785.4663034662251" positionY="354.7047245919256" id="13" mainText="13" upText="" size="30" ></node><node positionX="1044.1727443793613" positionY="342.64637353241494" id="14" mainText="14" upText="" size="30" ></node><node positionX="1004.7090500027812" positionY="267.00762597730306" id="15" mainText="15" upText="" size="30" ></node><node positionX="1146.12062151886" positionY="191.36887842219124" id="16" mainText="16" upText="" size="30" ></node><node positionX="1048.5575993100924" positionY="179.31052736268066" id="17" mainText="17" upText="" size="30" ></node><node positionX="1010.1901186661951" positionY="97.09449741147212" id="18" mainText="18" upText="" size="30" ></node><node positionX="1105.5607134095972" positionY="40.09138331196753" id="19" mainText="19" upText="" size="30" ></node><node positionX="1139.5433391227632" positionY="126.6922681939072" id="20" mainText="20" upText="" size="30" ></node><node positionX="1251.3571398564068" positionY="86.13236008464432" id="21" mainText="21" upText="" size="30" ></node><node positionX="1257.9344222525035" positionY="168.34839003585287" id="22" mainText="22" upText="" size="30" ></node><node positionX="1211.8934454798268" positionY="303.1826791558349" id="23" mainText="23" upText="" size="30" ></node><node positionX="1297.3981166290837" positionY="364.57064818607057" id="24" mainText="24" upText="" size="30" ></node><node positionX="1357.6898719266364" positionY="293.3167555616899" id="25" mainText="25" upText="" size="30" ></node><node positionX="1288.6284067676215" positionY="249.46820625437863" id="26" mainText="26" upText="" size="30" ></node><node positionX="1375.2292916495612" positionY="178.2143136299979" id="27" mainText="27" upText="" size="30" ></node><node positionX="1412.5005585607755" positionY="48.86109317342977" id="28" mainText="28" upText="" size="30" ></node><node positionX="1319.3223912827393" positionY="51.053520638795334" id="29" mainText="29" upText="" size="30" ></node><node positionX="1484.850664917839" positionY="115.7301308670794" id="30" mainText="30" upText="" size="30" ></node><node positionX="1470.599886392963" positionY="257.1417023831581" id="31" mainText="31" upText="" size="30" ></node><node positionX="1451.9642529373555" positionY="362.37822072070503" id="32" mainText="32" upText="" size="30" ></node><node positionX="705.4427009803821" positionY="280.16219076949653" id="33" mainText="33" upText="" size="30" ></node><node positionX="386.1297889046132" positionY="464.280064430953" id="34" mainText="34" upText="" size="30" ></node><node positionX="549.9974030864736" positionY="456.75992495712956" id="35" mainText="35" upText="" size="30" ></node><node positionX="403.2804477954781" positionY="605.1822749651391" id="36" mainText="36" upText="" size="30" ></node><node positionX="577.0131992047891" positionY="549.9559698813845" id="37" mainText="37" upText="" size="30" ></node><node positionX="686.6027294076757" positionY="423.4814388107468" id="38" mainText="38" upText="" size="30" ></node><node positionX="682.8636172819852" positionY="513.1384331588814" id="39" mainText="39" upText="" size="30" ></node><node positionX="591.9703234983058" positionY="647.7525518005333" id="40" mainText="40" upText="" size="30" ></node><node positionX="427.4419562696207" positionY="740.946941629369" id="41" mainText="41" upText="" size="30" ></node><node positionX="830.133764171997" positionY="528.0955574523981" id="42" mainText="42" upText="" size="30" ></node><node positionX="678.2614251916723" positionY="747.8502297648382" id="43" mainText="43" upText="" size="30" ></node><node positionX="882.6754254882371" positionY="423.42620185074077" id="44" mainText="44" upText="" size="30" ></node><node positionX="947.3520357165212" positionY="541.8172849804811" id="45" mainText="45" upText="" size="30" ></node><node positionX="864.0397920326297" positionY="670.0742917043668" id="46" mainText="46" upText="" size="30" ></node><node positionX="812.5177465965392" positionY="723.7887646058233" id="47" mainText="47" upText="" size="30" ></node><node positionX="1071.2241875096754" positionY="711.7304135463124" id="48" mainText="48" upText="" size="30" ></node><node positionX="1031.7604931330952" positionY="636.0916659912006" id="49" mainText="49" upText="" size="30" ></node><node positionX="1173.172064649174" positionY="560.4529184360887" id="50" mainText="50" upText="" size="30" ></node><node positionX="1075.6090424404065" positionY="548.3945673765778" id="51" mainText="51" upText="" size="30" ></node><node positionX="1037.2415617965091" positionY="466.1785374253692" id="52" mainText="52" upText="" size="30" ></node><node positionX="1132.6121565399112" positionY="409.17542332586464" id="53" mainText="53" upText="" size="30" ></node><node positionX="1166.5947822530773" positionY="495.7763082078043" id="54" mainText="54" upText="" size="30" ></node><node positionX="1278.4085829867208" positionY="455.21640009854144" id="55" mainText="55" upText="" size="30" ></node><node positionX="1284.9858653828176" positionY="537.43243004975" id="56" mainText="56" upText="" size="30" ></node><node positionX="1238.9448886101409" positionY="672.2667191697325" id="57" mainText="57" upText="" size="30" ></node><node positionX="1324.4495597593977" positionY="733.6546881999683" id="58" mainText="58" upText="" size="30" ></node><node positionX="1384.7413150569505" positionY="662.4007955755875" id="59" mainText="59" upText="" size="30" ></node><node positionX="1315.6798498979356" positionY="618.552246268276" id="60" mainText="60" upText="" size="30" ></node><node positionX="1402.2807347798753" positionY="547.2983536438952" id="61" mainText="61" upText="" size="30" ></node><node positionX="1439.5520016910896" positionY="417.94513318732686" id="62" mainText="62" upText="" size="30" ></node><node positionX="1346.3738344130534" positionY="420.13756065269246" id="63" mainText="63" upText="" size="30" ></node><node positionX="1511.902108048153" positionY="484.8141708809765" id="64" mainText="64" upText="" size="30" ></node><node positionX="1497.6513295232771" positionY="626.2257423970556" id="65" mainText="65" upText="" size="30" ></node><node positionX="1479.0156960676695" positionY="731.4622607346026" id="66" mainText="66" upText="" size="30" ></node><node positionX="732.4941441106962" positionY="649.246230783394" id="67" mainText="" upText="" size="30" ></node><edge source="1" target="0" directed="false" weight="6" useWeight="true" id="10169" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="2" target="0" directed="false" weight="10" useWeight="true" id="10170" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="2" target="1" directed="false" weight="12" useWeight="true" id="10171" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="3" target="1" directed="false" weight="11" useWeight="true" id="10172" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="3" target="2" directed="false" weight="12" useWeight="true" id="10173" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="4" target="1" directed="false" weight="14" useWeight="true" id="10174" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="5" target="3" directed="false" weight="6" useWeight="true" id="10175" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="5" target="4" directed="false" weight="4" useWeight="true" id="10176" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="6" target="2" directed="false" weight="8" useWeight="true" id="10177" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="6" target="3" directed="false" weight="3" useWeight="true" id="10178" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="7" target="2" directed="false" weight="16" useWeight="true" id="10179" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="8" target="4" directed="false" weight="6" useWeight="true" id="10180" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="8" target="5" directed="false" weight="12" useWeight="true" id="10181" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="8" target="6" directed="false" weight="16" useWeight="true" id="10182" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="9" target="6" directed="false" weight="6" useWeight="true" id="10183" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="9" target="7" directed="false" weight="8" useWeight="true" id="10184" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="4" target="10" directed="false" weight="1" useWeight="true" id="10185" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="8" target="11" directed="false" weight="7" useWeight="true" id="10186" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="13" target="12" directed="false" weight="11" useWeight="true" id="10187" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="9" target="13" directed="false" weight="1" useWeight="true" id="10188" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="13" target="8" directed="false" weight="11" useWeight="true" id="10189" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="10" target="8" directed="false" weight="7" useWeight="true" id="10190" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="12" target="11" directed="false" weight="11" useWeight="true" id="10191" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="11" target="15" directed="false" weight="42" useWeight="true" id="10192" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="12" target="15" directed="false" weight="7" useWeight="true" id="10193" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="12" target="14" directed="false" weight="7" useWeight="true" id="10194" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="13" target="14" directed="false" weight="3" useWeight="true" id="10195" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="10" target="18" directed="false" weight="11" useWeight="true" id="10196" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="11" target="18" directed="false" weight="5" useWeight="true" id="10197" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="11" target="17" directed="false" weight="10" useWeight="true" id="10198" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="15" target="17" directed="false" weight="5" useWeight="true" id="10199" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="14" target="17" directed="false" weight="3" useWeight="true" id="10200" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="15" target="14" directed="false" weight="3" useWeight="true" id="10201" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="17" target="16" directed="false" weight="1" useWeight="true" id="10202" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="18" target="19" directed="false" weight="7" useWeight="true" id="10203" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="18" target="17" directed="false" weight="5" useWeight="true" id="10204" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="17" target="20" directed="false" weight="3" useWeight="true" id="10205" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="19" target="20" directed="false" weight="5" useWeight="true" id="10206" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="14" target="22" directed="false" weight="7" useWeight="true" id="10207" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="14" target="23" directed="false" weight="5" useWeight="true" id="10208" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="23" target="26" directed="false" weight="3" useWeight="true" id="10209" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="22" target="26" directed="false" weight="7" useWeight="true" id="10210" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="16" target="21" directed="false" weight="10" useWeight="true" id="10211" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="19" target="21" directed="false" weight="11" useWeight="true" id="10212" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="20" target="21" directed="false" weight="3" useWeight="true" id="10213" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="10" target="19" directed="false" weight="11" useWeight="true" id="10214" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="7" target="6" directed="false" weight="1" useWeight="true" id="10215" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="23" target="24" directed="false" weight="5" useWeight="true" id="10216" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="14" target="24" directed="false" weight="11" useWeight="true" id="10217" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="21" target="29" directed="false" weight="3" useWeight="true" id="10218" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="19" target="29" directed="false" weight="5" useWeight="true" id="10219" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="16" target="22" directed="false" weight="5" useWeight="true" id="10220" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="22" target="28" directed="false" weight="7" useWeight="true" id="10221" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="29" target="28" directed="false" weight="1" useWeight="true" id="10222" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="27" target="30" directed="false" weight="7" useWeight="true" id="10223" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="26" target="27" directed="false" weight="10" useWeight="true" id="10224" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="26" target="25" directed="false" weight="7" useWeight="true" id="10225" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="24" target="25" directed="false" weight="10" useWeight="true" id="10226" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="25" target="31" directed="false" weight="11" useWeight="true" id="10227" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="31" target="30" directed="false" weight="11" useWeight="true" id="10228" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="27" target="31" directed="false" weight="7" useWeight="true" id="10229" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="28" target="27" directed="false" weight="3" useWeight="true" id="10230" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="28" target="30" directed="false" weight="5" useWeight="true" id="10231" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="24" target="32" directed="false" weight="5" useWeight="true" id="10232" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="32" target="31" directed="false" weight="11" useWeight="true" id="10233" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="9" target="33" directed="false" weight="11" useWeight="true" id="10234" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="33" target="8" directed="false" weight="7" useWeight="true" id="10235" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="35" target="34" directed="false" weight="6" useWeight="true" id="10236" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="36" target="34" directed="false" weight="10" useWeight="true" id="10237" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="36" target="35" directed="false" weight="12" useWeight="true" id="10238" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="37" target="35" directed="false" weight="11" useWeight="true" id="10239" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="37" target="36" directed="false" weight="12" useWeight="true" id="10240" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="38" target="35" directed="false" weight="14" useWeight="true" id="10241" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="39" target="37" directed="false" weight="6" useWeight="true" id="10242" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="39" target="38" directed="false" weight="4" useWeight="true" id="10243" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="40" target="36" directed="false" weight="8" useWeight="true" id="10244" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="40" target="37" directed="false" weight="3" useWeight="true" id="10245" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="41" target="36" directed="false" weight="16" useWeight="true" id="10246" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="42" target="38" directed="false" weight="6" useWeight="true" id="10247" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="42" target="39" directed="false" weight="12" useWeight="true" id="10248" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="42" target="40" directed="false" weight="16" useWeight="true" id="10249" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="43" target="40" directed="false" weight="6" useWeight="true" id="10250" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="43" target="41" directed="false" weight="8" useWeight="true" id="10251" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="38" target="44" directed="false" weight="1" useWeight="true" id="10252" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="42" target="45" directed="false" weight="7" useWeight="true" id="10253" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="47" target="46" directed="false" weight="11" useWeight="true" id="10254" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="43" target="47" directed="false" weight="1" useWeight="true" id="10255" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="47" target="42" directed="false" weight="11" useWeight="true" id="10256" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="44" target="42" directed="false" weight="7" useWeight="true" id="10257" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="46" target="45" directed="false" weight="11" useWeight="true" id="10258" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="45" target="49" directed="false" weight="42" useWeight="true" id="10259" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="46" target="49" directed="false" weight="7" useWeight="true" id="10260" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="46" target="48" directed="false" weight="7" useWeight="true" id="10261" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="47" target="48" directed="false" weight="3" useWeight="true" id="10262" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="44" target="52" directed="false" weight="11" useWeight="true" id="10263" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="45" target="52" directed="false" weight="5" useWeight="true" id="10264" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="45" target="51" directed="false" weight="10" useWeight="true" id="10265" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="49" target="51" directed="false" weight="5" useWeight="true" id="10266" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="48" target="51" directed="false" weight="3" useWeight="true" id="10267" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="49" target="48" directed="false" weight="3" useWeight="true" id="10268" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="51" target="50" directed="false" weight="1" useWeight="true" id="10269" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="52" target="53" directed="false" weight="7" useWeight="true" id="10270" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="52" target="51" directed="false" weight="5" useWeight="true" id="10271" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="51" target="54" directed="false" weight="3" useWeight="true" id="10272" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="53" target="54" directed="false" weight="5" useWeight="true" id="10273" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="48" target="56" directed="false" weight="7" useWeight="true" id="10274" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="48" target="57" directed="false" weight="5" useWeight="true" id="10275" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="57" target="60" directed="false" weight="3" useWeight="true" id="10276" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="56" target="60" directed="false" weight="7" useWeight="true" id="10277" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="50" target="55" directed="false" weight="10" useWeight="true" id="10278" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="53" target="55" directed="false" weight="11" useWeight="true" id="10279" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="54" target="55" directed="false" weight="3" useWeight="true" id="10280" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="44" target="53" directed="false" weight="11" useWeight="true" id="10281" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="41" target="40" directed="false" weight="1" useWeight="true" id="10282" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="57" target="58" directed="false" weight="5" useWeight="true" id="10283" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="48" target="58" directed="false" weight="11" useWeight="true" id="10284" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="55" target="63" directed="false" weight="3" useWeight="true" id="10285" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="53" target="63" directed="false" weight="5" useWeight="true" id="10286" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="50" target="56" directed="false" weight="5" useWeight="true" id="10287" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="56" target="62" directed="false" weight="7" useWeight="true" id="10288" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="63" target="62" directed="false" weight="1" useWeight="true" id="10289" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="61" target="64" directed="false" weight="7" useWeight="true" id="10290" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="60" target="61" directed="false" weight="10" useWeight="true" id="10291" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="60" target="59" directed="false" weight="7" useWeight="true" id="10292" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="58" target="59" directed="false" weight="10" useWeight="true" id="10293" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="59" target="65" directed="false" weight="11" useWeight="true" id="10294" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="65" target="64" directed="false" weight="11" useWeight="true" id="10295" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="61" target="65" directed="false" weight="7" useWeight="true" id="10296" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="62" target="61" directed="false" weight="3" useWeight="true" id="10297" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="62" target="64" directed="false" weight="5" useWeight="true" id="10298" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="58" target="66" directed="false" weight="5" useWeight="true" id="10299" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="66" target="65" directed="false" weight="11" useWeight="true" id="10300" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="43" target="67" directed="false" weight="11" useWeight="true" id="10301" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="67" target="42" directed="false" weight="7" useWeight="true" id="10302" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="9" target="34" directed="false" weight="1" useWeight="true" id="10303" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="9" target="53" directed="false" weight="7" useWeight="true" id="10304" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="63" target="24" directed="false" weight="1" useWeight="true" id="10305" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="14" target="53" directed="false" weight="3" useWeight="true" id="10306" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge><edge source="34" target="7" directed="false" weight="1" useWeight="true" id="10307" text="" upText="" arrayStyleStart="" arrayStyleFinish="" model_width="4" model_type="0" model_curveValue="0.1" model_default="true" ></edge></graph></graphml>`;

    function parseGraphML(xmlString) {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlString, "application/xml");

        const nodes = [];
        const edges = [];

        let maxId = -1;
        let minX = Infinity;
        let minY = Infinity;

        // Estrai i nodi
        const nodeElements = xmlDoc.querySelectorAll("node");
        nodeElements.forEach((nodeElement, idx) => {
            const id = parseInt(nodeElement.getAttribute("id"));
            if(id > maxId) maxId = id;
            const positionX = parseFloat(nodeElement.getAttribute("positionX"));
            if(positionX < minX) minX = positionX;
            const positionY = parseFloat(nodeElement.getAttribute("positionY"));
            if(positionY < minY) minY = positionY;
            const mainText = nodeElement.getAttribute("mainText");

            nodes[id] = { id, positionX, positionY, mainText };
        });

        minX = minX - 50;
        minY = minY - 50;

        // aggiusto le posizioni
        nodes.forEach((nodeElement, idx) => {
            nodes[idx].x = nodeElement.positionX - minX;
            nodes[idx].y = nodeElement.positionY - minY;
        });

        // Estrai gli archi
        const edgeElements = xmlDoc.querySelectorAll("edge");
        edgeElements.forEach((edgeElement) => {
            const source = parseInt(edgeElement.getAttribute("source"));
            const target = parseInt(edgeElement.getAttribute("target"));
            const weight = parseInt(edgeElement.getAttribute("weight"));

            edges.push({ source, target, weight });
        });

        // Crea la matrice di adiacenza
        const adjacencyMatrix = Array(maxId + 1)
            .fill(null)
            .map(() => Array(maxId + 1).fill(0));

        edges.forEach((edge) => {
            adjacencyMatrix[edge.source][edge.target] = edge.weight;
            console.log(edge);
            adjacencyMatrix[edge.target][edge.source] = edge.weight; // Per grafi non diretti
        });

        return { nodes, adjacencyMatrix };
    }
    
    let { nodes, adjacencyMatrix } = parseGraphML(xmlString);

    const canvas = document.getElementById('graphCanvas');
    const ctx = canvas.getContext('2d');

    // Funzione che implementa l'algoritmo di Dijkstra
    function dijkstra(graph, start) {
        const V = graph.length; // Numero di vertici
        const dist = new Array(V).fill(Infinity); // Array delle distanze (inizializzate a Infinity)
        const parent = new Array(V).fill(-1); // Array dei genitori (precedenti nei percorsi più brevi)
        const pq = new PriorityQueue({ comparator: (a, b) => a[1] - b[1] }); // Coda di priorità
        const visited = new Array(V).fill(false); // Array per tenere traccia dei vertici visitati

        dist[start] = 0; // La distanza dall'origine è 0
        pq.queue([start, 0]); // Aggiungi il nodo di partenza nella coda di priorità con distanza 0

        while (pq.length) {
        const [u, uDist] = pq.dequeue(); // Estrai il vertice con la distanza minima

        if (visited[u]) continue; // Se il vertice è già stato visitato, salta

        visited[u] = true; // Marca il vertice come visitato

        // Esamina i vertici adiacenti di u
        for (let v = 0; v < V; v++) {
            // Se c'è un arco tra u e v e v non è stato ancora visitato
            if (graph[u][v] !== 0 && !visited[v]) {
            const newDist = uDist + graph[u][v]; // Calcola la nuova distanza per v

            // Se la nuova distanza è migliore, aggiorna dist[] e parent[]
            if (newDist < dist[v]) {
                dist[v] = newDist;
                parent[v] = u;
                pq.queue([v, dist[v]]); // Aggiungi v alla coda con la nuova distanza
            }
            }
        }
        }

        // Ritorna le distanze minime e i genitori per ricostruire i percorsi
        return { dist, parent };
    }

    // Funzione per ricostruire il percorso dal nodo start a un nodo target
    function getPath(parent, target) {
        const path = [];
        for (let v = target; v !== -1; v = parent[v]) {
            path.unshift(v);
        }
        return path;
    }

    const { dist, parent } = dijkstra(adjacencyMatrix, 0);

    console.log("distances: " + dist);

    console.log("previous: " + parent);

    function reconstructPath(startNode, endNode, distances, previous) {

        const V = distances.length; // Numero di vertici
        const path = [];
        let currentNode = endNode;

        while (currentNode !== -1) {
            // inserisci il nodo all'inizio del percorso
            path[currentNode] = previous[currentNode];
            currentNode = previous[currentNode];
        }

        return path.reverse();
    }

    let bestPath = reconstructPath(0, 66, dist, parent).reverse();

    console.log("bestPath: " + bestPath);

    drawGraph(bestPath);

    // Draw the graph
    function drawGraph(parents) {
        // Draw edges
        for (let i = 0; i < adjacencyMatrix.length; i++) {
            for (let j = 0; j < adjacencyMatrix.length; j++) {
                if (adjacencyMatrix[i][j] > 0) {
                    
                    ctx.beginPath();
                    ctx.moveTo(nodes[i].x, nodes[i].y);
                    ctx.lineTo(nodes[j].x, nodes[j].y);
                    ctx.lineWidth = 5;
                    ctx.strokeStyle = 'black';
                    if(parents[i] == j){
                        ctx.lineWidth = 10;
                        ctx.strokeStyle = 'green';
                    }
                    ctx.stroke();

                    // Draw weights
                    ctx.lineWidth = 5;
                    const midX = (nodes[i].x + nodes[j].x) / 2;
                    const midY = (nodes[i].y + nodes[j].y) / 2;
                    ctx.fillStyle = 'black';
                    ctx.font = "20px Arial";
                    ctx.fillText(adjacencyMatrix[i][j], midX, midY);
                }
            }
        }

        // Draw nodes
        for (let i = 0; i < nodes.length; i++) {
            if(nodes[i] === undefined) continue;

            ctx.beginPath();
            ctx.arc(nodes[i].x, nodes[i].y, 20, 0, 2 * Math.PI);
            ctx.fillStyle = 'white';
                
            ctx.fill();
            ctx.strokeStyle = 'black';
            ctx.stroke();
            ctx.fillStyle = 'black';

            ctx.fillText(nodes[i].mainText, nodes[i].x - 5, nodes[i].y + 5);
        }
    }
    </script>
</body>
</html>
